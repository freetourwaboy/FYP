<!DOCTYPE html>
<html>
  <head>
    <title>Barcode generator</title>
    <script src="ean13.js"></script>
    <script src="upc.js"></script>
    <script src="code39.js"></script>
    <script src="code128.js"></script>
    <script src="drawcode.js"></script>
  </head>
  <body>
    <label for="barcode-input">Enter code:</label>
    <input type="text" id="input-box" placeholder="please input something">
    <select id="choose" onchange="inputhint()">
        <option value="blank"></option>
        <option value="ean13">EAN13</option>
        <option value="upc">UPC</option>
        <option value="code39">Code39</option>
        <option value="code128">Code128</option>
      </select>
      <script>
        function inputhint(){
            var droplist = document.getElementById("choose").value;
            var input = document.getElementById("input-box")
            if (droplist=='ean13')
        {
            input.placeholder = "please write down 12 digit code, e.g. 123456789012";
        }
        else if (droplist=='upc')
        {
            input.placeholder = "please write down 11 digit code, e.g. 12345678901";
        }
        else if (droplist=='code39')
        {
            input.placeholder = "please write down the code39";
        }
        else if (droplist=='code128')
        {
            input.placeholder = "please write down the code128";
        }
        else if (droplist=='blank')
        {
            input.placeholder = "please input something";
        }
        }


        function generate() {
        const option = document.querySelector("#choose");
        option.addEventListener('change', () => {
        })
        var selected = option.value;
        const code = document.getElementById("input-box").value;
        var binary='';
        var fullcode=code;
        const obj = {
            type: 'EAN13',
            barWidth: 2,
            barHeight: 80,
            textColor: '#f00',
            fontSize: 18,
            fontFamily: 'Verdana',
            padding: 10,
            paddingTop: 0.2,
        };
        if (selected=='ean13')
        {
          obj.type = "ean13";
          var ean =generateEAN13(code);
          binary = ean.barcode;
          fullcode = ean.fullcode;
        }
        else if (selected=='upc')
        {
          obj.type = "upc";
          binary=generateUPC(code);
        }
        else if (selected=='code39')
        {
          obj.type = "code39";
          binary=generateCode39(code);
        }
        else if (selected=='code128')
        {
          obj.type = "code128";
          binary=generateCode128(code);
        }
        
        drawBarcode(binary, fullcode, obj);
      }
      </script>

    <button onclick="generate()">show input</button>
    <br>
    <label id="display-label"></label>
    <canvas id="barcode-canvas" width="300" height="300"></canvas>
    <label id="error"></label>
  </body>
</html>
